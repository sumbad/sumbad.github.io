<!DOCTYPE html><html class=" js flexbox flexboxlegacy canvas canvastext no-webgl touch no-geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent no-video no-audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths" lang="en" style=""><!--<![endif]--><head>

  <!--- Basic Page Needs
   ================================================== -->
  <meta charset="utf-8">
  <title>Использование Vue.js для создания пользовательских Web компонентов</title>
  <meta name="description" content="">
  <meta name="author" content="">

  <!-- mobile specific metas
   ================================================== -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <!-- CSS
    ================================================== -->
  <link rel="stylesheet" href="css/default.css">
  <link rel="stylesheet" href="css/layout.css">
  <link rel="stylesheet" href="css/media-queries.css">

  <!-- Script
   ================================================== -->
  <script src="js/modernizr.js"></script>

  <!-- Favicons
	================================================== -->
  <link rel="shortcut icon" href="favicon.png">

<style type="text/css">b,strong{font-size:18px}a,b,strong{font-weight:700}</style><style type="text/css"></style></head>

<body class="page" style="">

  <!-- Header
   ================================================== -->
  <header id="top">

    <div class="row">

      <div class="header-content twelve columns">

        <h1 id="logo-text"><a href="index.html" title="">Vue.js + web components</a></h1>
        <p id="intro">13 апреля 2017</p>

      </div>

    </div>

    <!--<nav id="nav-wrap"> 

	   	<a class="mobile-btn" href="#nav-wrap" title="Show navigation">Show Menu</a>
		   <a class="mobile-btn" href="#" title="Hide navigation">Hide Menu</a>

	   	<div class="row">    		            

			   	<ul id="nav" class="nav">
			      	<li><a href="index.html">Home</a></li>
			      	<li class="has-children"><a href="#">Dropdown</a>
	                  <ul>
	                     <li><a href="#">Submenu 01</a></li>
	                     <li><a href="#">Submenu 02</a></li>
	                     <li><a href="#">Submenu 03</a></li>
	                  </ul>
	               </li>
	               <li><a href="demo.html">Demo</a></li>	
	               <li><a href="archives.html">Archives</a></li>
			      	<li class="has-children"><a href="single.html">Blog</a>
							<ul>
	                     <li><a href="blog.html">Blog Entries</a></li>
	                     <li><a href="single.html">Single Blog</a></li>	                     
	                  </ul>
			      	</li>		      	
			      	<li class="current"><a href="page.html">Page</a></li>
			   	</ul>  end #nav    	 

	   	</div> 

	   </nav>  end #nav-wrap -->

  </header>
  <!-- Header End -->

  <!-- Content
   ================================================== -->
  <div id="content-wrap">

    <div class="row">

      <div id="main" class="twelve columns">

        <section id="page" class="page"><h2 class="entry-title">
    Использование Vue.js для создания пользовательских Web компонентов
  </h2> <p class="lead"><strong>Web компоненты позволяют определять новые HTML теги,</strong> которые принято называть пользовательскими элементами
    (custom elements). Эти теги могут быть в дальнейшем использованы непосредственно в HTML коде вашего приложения подобно
    этому:
  </p> <iframe id="84cb537ad664af6a299329c9c97960c3" scrolling="no" style="width: 100%; height: 0px;"></iframe> <p class="lead">В этом примере, <span>&lt;share-buttons/&gt;</span> будет интерпретирован браузером и "заменен" HTML разметкой,
    которую вы для него определили. В результате получим:</p> <iframe id="e9ea19cb422c98942137e9e3db39c426" scrolling="no" style="width: 100%; height: 0px;"></iframe> <p class="lead">Так же здесь можно было бы использовать JS логику для того, чтобы при событии click делиться данной страницей через Facebook
    или Twitter.
  </p> <p class="lead"><strong>Web компоненты подобны Vue.js компонентам.</strong> Они имеют жизненный цикл (lifecycle), свойства и могут
    быть вложенными. Их API менее мощный, но зато следует стандарту определенному в
    <a href="https://www.w3.org/standards/techs/components#w3c_all">W3C спецификации</a>.
  </p> <p class="lead"><strong>Проблема. Web компоненты не имеют полной поддержки в браузерах до настоящего момента.</strong> Посмотреть поддержку
    Web компонентов браузерами можно на сайте
    <a href="http://jonrimmer.github.io/are-we-componentized-yet/">are-we-componentized-yet</a> или <a href="http://caniuse.com/#search=web%20components">caniuse.com</a>.
  </p> <p class="lead">
    Но, применив немного JS магии <strong>вы можете прямо сейчас перевести ваш Vue.js компонент в Web компоненты, </strong>      
    что позволит использовать его в любых web приложениях, даже вместе с React, Angular или
    &lt;имя-вашего-любимого-framework&gt;.
  </p> <h3>Как получить из вашего Vue.js компонента универсальные Web компоненты</h3> <p class="lead">
    Понадобиться <a href="https://karol-f.github.io/vue-custom-element">vue-custom-element</a> библиотека написанная
    <a href="https://github.com/karol-f">@karol-f</a>. Она позволит вам
      <strong>использовать Vue.js компонент как пользовательский элемент </strong>.
  </p> <h4>HTML подход</h4> <p class="lead">
    Один раз зарегистрировав пользовательский компонент вы можете <strong>вставлять его тег</strong> в обычный HTML, SPA’s,
    React, Angular или Vue.js проект.
  </p> <iframe id="b8f682341afaf53cb30e08183f4480fa" scrolling="no" style="width: 100%; height: 0px;"></iframe> <p class="lead"><strong>Данный подход требует включения в вашу страницу ядра Vue.js и библиотеки vue-custom-element</strong></p> <p class="lead">
    Props будут <a href="https://karol-f.github.io/vue-custom-element/#/demos/basic">автоматически интерпретированы к их нативным типам</a>
    (атрибут "false" будет интерпретирован как boolean значение false).
  </p> <p class="lead">
    API пользовательского элемента доступно так же как любого другого HTML элемента: document.getElementsByTagName('share-buttons').
  </p> <p class="lead">
    Этот пример использует HTML тег <span>&lt;template&gt;</span>, но вы можете поместить строку шаблона непосредственно
    в template свойство вашего компонента.
  </p> <h5>Плюсы и минусы</h5> <p class="lead">
    Такой способ подразумевает две обязательные вещи:
    <ul class="disc"><li>зависимый скрипт должен быть включен в итоговый HTML файл</li> <li>поведение компонента понятно непосредственно из исходного кода</li></ul>
    Эти вещи могут быть как плюсами, так и минусами в зависимости от ваших задач.
  </p> <p class="lead">
    Наиболее вероятный подход, который я могу представить - это распространение Vue.js компонентов в форме виджетов на множество вебсайтов.
    Итак, давайте соберем весь этот код в единый файл.
  </p> <h4>Сборка Vue.js компонентов в единый .js файл</h4> <p class="lead">
    Посмотрите на <a href="https://github.com/kartsims/vue-customelement-bundler">vue-customelement-bundler</a> репозиторий, который содержит:
    <ul class="disc"><li>настройки Webpack</li> <li>код компонента (ES2015 во .vue файле)</li> <li>NPM зависимости, чтобы можно было собрать и запустить собственный экземпляр</li></ul> <strong>Он позволяет взять код Vue.js компонента (в форме .vue файла) и на выходе получить единый .js файл</strong>
    с вложенным кодом самого Vue, библиотеки vue-custom-element и вашего Vue.js компонента. Получившийся файл будет зарегистрирован,
    чтобы использоваться, как пользовательский элемент. Далее, можно использовать ваш компонент в любом HTML/JS приложении, подобно этому:
  </p> <iframe id="30173875f0649fc253e15e210342bf7d" scrolling="no" style="width: 100%; height: 0px;"></iframe> <p class="lead">
    Замечание: <del>Итоговый файл весит 266kB.</del> Слишком большой размер итогового файла. Я пытался уменьшить его, но мои навыки в Webpack
    не заходят так далеко. UglifyJsPlugin выбросил ошибку, которую не удалось устранить. Итак, если вы можете, пожалуйста сообщите мне, как 
    можно оптимизировать мои настройки, уверен их можно улучшить.
  </p> <p class="lead">
    Изменение 5/4: Спасибо <a href="https://github.com/anthonygore">@anthonygore</a> и UglifyJS, <del>итоговый файл стал весить 113kB.</del>.
  </p> <p class="lead">
    Изменение 6/4: Энтони удалось уменьшить сборку еще на 22kB. <strong>Итоговый файл теперь весит 91kB (32kB в gzip)</strong>!
  </p> <p class="lead">
    Изменение 11/4: <a href="https://github.com/chimon2000">@chimon2000</a> предложено в качестве альтернативы для сборки
    <strong>использовать rollup.js, таким образом, вес файла стал 76kB (24kB в gzip)</strong>, спасибо Раян!
    Эта сборка находится в <a href="https://github.com/kartsims/vue-customelement-bundler/tree/rollup"><code class="highlighter-rouge">rollup</code> ветке</a>
    репозитории.
  </p> <h3>Немного об API Web компонентов (Web Components API)</h3> <p class="lead"><strong>Это часть статьи не обязательна</strong> для использования Vue.js компонентов, как Web компонентов, 
    но часто бывает полезно знать как это работает, чтобы писать код лучше.
  </p> <p class="lead">
    Web компоненты включают следующие W3C спецификации:
    <ul class="disc"><li>Custom Element</li> <li>HTML Template</li> <li>HTML Import</li></ul>
    Рассмотрим каждую из них подробнее.
  </p> <h3>Custom Element</h3> <p class="lead">
    Custom Element является основным API доступный разработчикам для определения новых HTML тегов, которые могут быть интерпретированы браузером.
  </p> <p class="lead">
    Функции обатных вызовов жизненного цикла (иначе говоря, <a href="https://www.w3.org/TR/custom-elements/#custom-element-reactions">реакции</a>)
    <ul class="disc"><li>constructor (элемент обновлен, имеется ввиду вставлен в DOM с помощью JS или изначально там находящийся)</li> <li>connectedCallback (вставка в DOM)</li> <li>disconnectedCallback (удаление из DOM)</li> <li>adoptedCallback (перемещение в новый документ)</li> <li>attributeChangedCallback</li></ul>
    Звучит знакомо? Да, это выглядит как жизненный цикл компонентов Vue.js!
  </p> <p class="lead">
    Однако, написание пользовательских элементов намного более многословно. Одна из причин этого - вы не можете получить выгоду от
    магии реактивных свойств во Vue.js, или сахара в синтаксисе шаблонов типо v-if выражений.
  </p> <p class="lead">
    Регистрация пользовательских элементов выполняется используя window.customElements.define как в примере ниже:
  </p> <iframe id="e0c5e64d1185b04dcb12a79027ef80ec" scrolling="no" style="width: 100%; height: 0px;"></iframe> <p class="lead">
    Обратите внимание, что connectedCallback вызывается, когда  элемент уже вставлен.
  </p> <p class="lead">
    Помимо этого, теги компонентов должны соответствовать нескольким требованиям:
    <ul class="disc"><li>содержать дефис</li> <li>не содержать заглавных символов</li> <li>не использовать одно из запрещенных имен (annotation-xml, color-profile и т.д.)</li></ul>
    Подробнее в <a href="https://www.w3.org/TR/custom-elements/#valid-custom-element-name">W3C спецификации</a>.
  </p> <h3>HTML Template</h3> <p class="lead">
    Разметка пользовательского элемента может содержаться в теге <span>&lt;template&gt;</span> внутри DOM.
  </p> <iframe id="bf9f90fbaf3aa6fbeaf3121f0a591835" scrolling="no" style="width: 100%; height: 0px;"></iframe> <p class="lead">
    Эта разметка может быть импортирована и клонирована в пользовательский элемент по реакции на createdCallback.
  </p> <h3>HTML Import</h3> <p class="lead">
    Определяет разметку и JS логику в одном файле, который может быть импортирован в ваше приложение с помощью одного 
    тега <span>&lt;link&gt;</span>.
  </p> <iframe id="912cd8ed9e25833d0fd3e8b7c35830f4" scrolling="no" style="width: 100%; height: 0px;"></iframe> <p class="lead">
    Содержимое файла share-buttons.html: 
  </p> <iframe id="2e1c7d75f3554802bf60d12abf7790bc" scrolling="no" style="width: 100%; height: 0px;"></iframe> <p class="lead">
    Звучит все более и более знакомо, не так ли?
  </p> <h3>Взаимодействие помпонентов</h3> <p class="lead"><strong>Взаимодействие компонента с его родителем происходит посредством событий</strong>, точно так же как во Vue.js.
    События запускаются используя dispatchEvent метод HTML элементов.
  </p> <iframe id="bcb94cad7197d4ca6f98a404a0c682c5" scrolling="no" style="width: 100%; height: 0px;"></iframe> <p class="lead">
    Родительский компонент может взаимодействовать с дочерними двумя способами:
    <ul class="disc"><li>используя атрибуты</li> <li>используя методы компонента прототипа</li></ul>
    Первый способ точно такой же как во Vue.js. Вы можете установить атрибуты, только они не будут реактивными, так что вам будет нужно
    использовать attributeChangedCallback если захотите запускать логику, когда заначение атрибутов меняется.
  </p> <p class="lead">
    Второй метод так же работает во Vue.js, хотя там он и не рекомендуется.
  </p> <h3>Поддержка и полифиллы (polyfills)</h3> <p class="lead">
    Состоянии поддержки браузерами пользовательских компонентов можно узнать на <a href="http://caniuse.com/#search=web%20components">caniuse.com</a>
    или <a href="http://jonrimmer.github.io/are-we-componentized-yet/">are-we-componentized-yet</a>.
  </p> <p class="lead">
    Библиотека полифиллов позволяет вам использовать эти API в барузерах, еще не имеющих их поддержки.
    Ниже ссылки на некоторые из них:
    <ul class="disc"><li><a href="https://github.com/webcomponents/custom-elements">Custom Elements polyfill</a> (от команды Polymer)</li> <li><a href="https://github.com/WebReflection/document-register-element">document-register-element</a> (от Andrea Giammarchi)</li></ul>
    Замечание: я не упомянал Shadow DOM в этой статье. Думаю это могло бы смутить разработчиков, которые фокусируются на переносе
    их Vue.js компонентов к пользовательским элементам. Посмотрите ссылки в конче, чтобы получить больше информации по теме.
  </p> <h3>Ссылки</h3> <ul class="disc"><li><a href="https://karol-f.github.io/vue-custom-element/">Vue Custom Element</a>: трансформация Vue.js компонентов в пользовательские элементы</li> <li><a href="https://github.com/kartsims/vue-customelement-bundler">Vue Custom Element Bundler</a>: сборка Vue.js компонентов в виде единого .js файла</li> <li><a href="https://www.webcomponents.org">WebComponents.org</a>: каталог и ресурсы по пользовательским элементам (Custom Elements)</li> <li>
      Статья "The case for Custom Elements" (<a href="https://medium.com/dev-channel/the-case-for-custom-elements-part-1-65d807b4b439#.lj3f8evee">часть 1</a>
      и <a href="https://medium.com/dev-channel/the-case-for-custom-elements-part-2-2efe42ce9133#.x0xz0nwph">часть 2</a>)
      автор Rob Dodson
    </li> <li><a href="http://www.backalleycoder.com/2016/08/26/demythstifying-web-components/">Demythstifying Web Components</a> автор Daniel Buchner</li></ul></section>
        <!-- End page -->

      </div>
      <!-- End main -->


      <!--<div id="sidebar" class="four columns">

   			<div class="widget widget_search">
                  <h3>Search</h3> 
                  <form action="#">

                     <input type="text" value="Search here..." onblur="if(this.value == '') { this.value = 'Search here...'; }" onfocus="if (this.value == 'Search here...') { this.value = ''; }" class="text-search">
                     <input type="submit" value="" class="submit-search">

                  </form>
               </div>

   			<div class="widget widget_categories group">
   				<h3>Categories.</h3> 
   				<ul>
						<li><a href="#" title="">Wordpress</a> (2)</li>
						<li><a href="#" title="">Ghost</a> (14)</li>
						<li><a href="#" title="">Joomla</a> (5)</li>
						<li><a href="#" title="">Drupal</a> 3</li>
						<li><a href="#" title="">Magento</a> (2)</li>
						<li><a href="#" title="">Uncategorized</a> (9)</li>						
					</ul>
				</div>

				<div class="widget widget_text group">
					<h3>Widget Text.</h3>

   				<p>Lorem ipsum Ullamco commodo laboris sit dolore commodo aliquip incididunt fugiat esse dolor aute fugiat minim eiusmod do velit labore fugiat officia ad sit culpa labore in consectetur sint cillum sint consectetur voluptate adipisicing Duis irure magna ut sit amet reprehenderit.</p>

   			</div>

   			<div class="widget widget_tags">
               <h3>Post Tags.</h3>

               <div class="tagcloud group">
                	<a href="#">Corporate</a>
                  <a href="#">Onepage</a>
                  <a href="#">Agency</a>
                  <a href="#">Multipurpose</a>
                  <a href="#">Blog</a>
                  <a href="#">Landing Page</a>
                  <a href="#">Resume</a>
               </div>
                  
            </div>

            <div class="widget widget_popular">
               <h3>Popular Post.</h3>

               <ul class="link-list">
                  <li><a href="#">Sint cillum consectetur voluptate.</a></li>
                  <li><a href="#">Lorem ipsum Ullamco commodo.</a></li>
                  <li><a href="#">Fugiat minim eiusmod do.</a></li>                     
               </ul>
                  
            </div>
   			
   		</div>  end sidebar -->

    </div>
    <!-- end row -->

  </div>
  <!-- end content-wrap -->


  <!-- Footer
   ================================================== -->
  <footer>

    <div class="row">

      <div class="twelve columns">
        <ul class="social-links">
          <!--<li><a href="#"><i class="fa fa-facebook"></i></a></li>-->
          <!--<li><a href="#"><i class="fa fa-twitter"></i></a></li>-->
          <!--<li><a href="#"><i class="fa fa-google-plus"></i></a></li>-->
          <li><a href="https://github.com/sumbad/"><i class="fa fa-github-square"></i></a></li>
          <!--<li><a href="#"><i class="fa fa-instagram"></i></a></li>-->
          <!--<li><a href="#"><i class="fa fa-flickr"></i></a></li>-->
          <!--<li><a href="#"><i class="fa fa-skype"></i></a></li>-->
        </ul>
      </div>
<!--
      <div class="six columns info">

        <h3>About Keep It Simple</h3>

        <p>This is Photoshop's version of Lorem Ipsum. Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem
          quis bibendum auctor, nisi elit consequat ipsum, nec sagittis sem nibh id elit.
        </p>

        <p>Lorem ipsum Sed nulla deserunt voluptate elit occaecat culpa cupidatat sit irure sint sint incididunt cupidatat esse
          in Ut sed commodo tempor consequat culpa fugiat incididunt.</p>

      </div>

      <div class="four columns">

        <h3>Photostream</h3>

        <ul class="photostream group">
          <li>
            <a href="#"><img alt="thumbnail" src="images/thumb.jpg"></a>
          </li>
          <li>
            <a href="#"><img alt="thumbnail" src="images/thumb.jpg"></a>
          </li>
          <li>
            <a href="#"><img alt="thumbnail" src="images/thumb.jpg"></a>
          </li>
          <li>
            <a href="#"><img alt="thumbnail" src="images/thumb.jpg"></a>
          </li>
          <li>
            <a href="#"><img alt="thumbnail" src="images/thumb.jpg"></a>
          </li>
          <li>
            <a href="#"><img alt="thumbnail" src="images/thumb.jpg"></a>
          </li>
          <li>
            <a href="#"><img alt="thumbnail" src="images/thumb.jpg"></a>
          </li>
          <li>
            <a href="#"><img alt="thumbnail" src="images/thumb.jpg"></a>
          </li>
        </ul>

      </div>

      <div class="two columns">
        <h3 class="social">Navigate</h3>

        <ul class="navigate group">
          <li><a href="#">Home</a></li>
          <li><a href="#">Blog</a></li>
          <li><a href="#">Demo</a></li>
          <li><a href="#">Archives</a></li>
          <li><a href="#">About</a></li>
        </ul>
      </div>
-->
      <p class="copyright">© Copyright 2017 Денис Сумбаев. 
        <!--&nbsp; Design by <a title="Styleshout" href="http://www.styleshout.com/">Styleshout</a>.-->
      </p>

    </div>
    <!-- End row -->

    <div id="go-top"><a class="smoothscroll" title="Back to Top" href="#top"><i class="fa fa-chevron-up"></i></a></div>

  </footer>
  <!-- End Footer-->


  <!-- Java Script
   ================================================== -->
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
  <script>
    window.jQuery || document.write('<script src="js/jquery-1.10.2.min.js"><\/script>')
  </script>
  <script type="text/javascript" src="js/jquery-migrate-1.2.1.min.js"></script>
  <script src="js/main.js"></script>
  <script src="js/app.js"></script>



</body></html>
